webpackJsonp([1],{"0jQh":function(t,e,n){"use strict";var s=n("cn+x"),a=n("pALC"),i=n("46Yf"),o=i(s.a,a.a,!1,null,null,null);e.a=o.exports},C0Fn:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("Menu",{ref:"mainMenu",attrs:{mode:"horizontal",theme:"dark","active-name":t.main_menu_id},on:{"on-select":t.getMenu}},[n("div",{staticClass:"layout-logo"},[t._v("后台管理")]),t._v(" "),n("div",{staticClass:"layout-nav"},t._l(t.menus,function(e,s){return n("MenuItem",{attrs:{name:e.sm_id}},[t._v(t._s(e.sm_name)+" - "+t._s(e.sm_id))])}))]),t._v(" "),n("div",{staticClass:"layout-breadcrumb"},[n("Breadcrumb",t._l(t.breadcrumb,function(e){return n("BreadcrumbItem",{attrs:{href:""}},[t._v(t._s(e))])}))],1),t._v(" "),n("div",{staticClass:"layout-content"},[n("Row",[n("Col",{attrs:{span:"5",className:"layout-menu"}},[n("Menu",{ref:"leftMenu",attrs:{"active-name":t.active_menu,"open-names":t.open_menu,width:"auto"},on:{"on-select":t.changeMenu}},t._l(t.sub_menus[0],function(e,s){return n("Submenu",{attrs:{name:e.sme_id}},[n("template",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"navicon-round"}}),t._v("\n             "+t._s(e.sme_title)+" - "+t._s(e.sme_id)+"\n           ")],1),t._v(" "),t._l(t.sub_menus[e.sme_id],function(s,a){return n("MenuItem",{attrs:{name:e.sme_id+"-"+s.sme_id}},[t._v("\n             "+t._s(s.sme_title.length>45?s.sme_title.substring(0,40)+"...":s.sme_title)+" - "+t._s(e.sme_id)+"-"+t._s(s.sme_id)+"\n           ")])})],2)}))],1),t._v(" "),n("Col",{attrs:{span:"19"}},[n("router-view")],1)],1)],1)],1)},a=[],i={render:s,staticRenderFns:a};e.a=i},CcIL:function(t,e,n){"use strict";e.a={name:"NewsList",components:{},data:function(){var t=this;return{columns:[{title:"姓名",key:"name",render:function(t,e){return t("div",[t("Icon",{props:{type:"person"}}),t("strong",e.row.name)])}},{title:"年龄",key:"age"},{title:"地址",key:"address"},{title:"操作",key:"action",width:150,align:"center",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.show(n.index)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(n.index)}}},"删除")])}}],data:[{name:"王小明",age:18,address:"北京市朝阳区芍药居"},{name:"张小刚",age:25,address:"北京市海淀区西二旗"},{name:"李小红",age:31,address:"上海市浦东新区世纪大道"},{name:"周小伟",age:27,address:"深圳市南山区深南大道"}]}},methods:{show:function(t){this.$Modal.info({title:"用户信息",content:"姓名："+this.data[t].name+"<br>年龄："+this.data[t].age+"<br>地址："+this.data[t].address})},remove:function(t){this.data.splice(t,1)},release:function(t){var e={};e.id=t,e.template=2,this.$emit("go",e)}}}},DICR:function(t,e,n){"use strict";var s=n("3cXf"),a=n.n(s),i=n("vUJM"),o=n("tra3"),r=n.n(o),c=n("Z7nP"),u=n.n(c),l=n("lO7g"),m=n("ERXc"),d=n("ZmoA");e.a={name:"app",components:{Home:l.a,NewsList:m.a,NewsEdit:d.a},data:function(){return{uinfo:window.DATA.uinfo,menus:window.DATA.menu,breadcrumb:["首页"],sub_menus:[],open_menu:[],active_menu:0,main_menu_id:[1]}},mounted:function(){var t=this,e=u.a.get("main_menu_id");if(e&&(this.main_menu_id=[e],this.$nextTick(function(){t.$refs.mainMenu.updateActiveName()}),console.log(this.main_menu_id)),!(this.sub_menus.length>0)){var n=JSON.parse(u.a.get("sub_menus"));if(n===[]||!n)return void this.$router.push("/");this.sub_menus=n;var s=u.a.get("active_menu");s&&(this.active_menu=s);var a=u.a.get("open_menu");a&&(this.open_menu=[a]),this.$nextTick(function(){t.$refs.leftMenu.updateOpened(),t.$refs.leftMenu.updateActiveName()}),console.log(this.open_menu,this.active_menu);var i=u.a.get("breadcrumb");i&&(this.breadcrumb=JSON.parse(i))}},methods:{getMenu:function(t){this.main_menu_id=t,u.a.set("main_menu_id",t),this.sub_menus=this.menus[t].child,u.a.set("sub_menus",a()(this.sub_menus)),this.breadcrumb=[this.menus[t].sm_name]},changeMenu:function(t){if(t){var e=t.split("-"),n=e[0],s=e[1],i=this.getMenuInfo(this.sub_menus[0],n),o=this.getMenuInfo(this.sub_menus[n],s);if(o){var r=o.sme_path;this.$router.push(r),this.active_menu=t,this.open_menu=[n],u.a.set("active_menu",this.active_menu),u.a.set("open_menu",n);var c=i.sme_title,l=o.sme_title;this.breadcrumb.length>1&&this.breadcrumb.splice(1),this.breadcrumb.push(c,l),u.a.set("breadcrumb",a()(this.breadcrumb))}}},logout:function(){var t=this;r.a.ajax({type:"post",dataType:"json",data:{action:"logout"},url:"http://"+document.location.host}).done(function(e){t.win=1,t.$emit("logout-return",t.win)}).fail(function(t){i.a.error("操作失败：服务器错误")})},getMenuInfo:function(t,e){var n={};for(var s in t)if(parseInt(t[s].sme_id)===parseInt(e))return t[s];return n}}}},ERXc:function(t,e,n){"use strict";function s(t){n("FSuz")}var a=n("CcIL"),i=n("X4F1"),o=n("46Yf"),r=s,c=o(a.a,i.a,!1,r,"data-v-61f7c043",null);e.a=c.exports},FGUt:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout-content"},[n("Form",{attrs:{model:t.formRight,"label-position":"right","label-width":100}},[n("FormItem",{attrs:{label:"标题"}},[n("Input",{model:{value:t.news.title,callback:function(e){t.$set(t.news,"title",e)},expression:"news.title"}})],1),t._v(" "),n("FormItem",{attrs:{label:"代表图"}},[n("Upload",{attrs:{action:"/manage/upload",name:"upload",headers:t.headers,"on-success":t.uploadSuccess,format:["jpg","jpeg","png"],"max-size":2048}},[n("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("上传文件")])],1)],1),t._v(" "),n("FormItem",{attrs:{label:"描述"}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入..."},model:{value:t.news.description,callback:function(e){t.$set(t.news,"description",e)},expression:"news.description"}})],1),t._v(" "),n("FormItem",{attrs:{label:"内容"}},[n("div",{attrs:{id:"content"}})]),t._v(" "),n("FormItem",{attrs:{label:"作者"}},[n("Input",{model:{value:t.news.author,callback:function(e){t.$set(t.news,"author",e)},expression:"news.author"}})],1),t._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(e){t.save()}}},[t._v("提交")]),t._v(" "),n("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(e){t.reset()}}},[t._v("重置")])],1)],1)],1)},a=[],i={render:s,staticRenderFns:a};e.a=i},FSuz:function(t,e){},HHc9:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.transitionName}},[n("div",{class:t.classes,style:t.styles},["notice"===t.type?[n("div",{ref:"content",class:[t.baseClass+"-content"],domProps:{innerHTML:t._s(t.content)}}),t._v(" "),t.closable?n("a",{class:[t.baseClass+"-close"],on:{click:t.close}},[n("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]):t._e()]:t._e(),t._v(" "),"message"===t.type?[n("div",{ref:"content",class:[t.baseClass+"-content"]},[n("div",{class:[t.baseClass+"-content-text"],domProps:{innerHTML:t._s(t.content)}}),t._v(" "),t.closable?n("a",{class:[t.baseClass+"-close"],on:{click:t.close}},[n("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]):t._e()])]:t._e()],2)])},a=[],i={render:s,staticRenderFns:a};e.a=i},M93x:function(t,e,n){"use strict";function s(t){n("b5ek")}var a=n("DICR"),i=n("C0Fn"),o=n("46Yf"),r=s,c=o(a.a,i.a,!1,r,null,null);e.a=c.exports},"MCn/":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"layout-content"})},a=[],i={render:s,staticRenderFns:a};e.a=i},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("MVSX"),a=n("M93x"),i=n("7m6+"),o=n.n(i),r=n("W+18"),c=(n.n(r),n("YaEn"));s.default.config.productionTip=!1,s.default.use(o.a),new s.default({el:"#app",router:c.a,template:"<App/>",components:{App:a.a}})},UzNf:function(t,e,n){"use strict";var s=n("a3Yh"),a=n.n(s);e.a={props:{prefixCls:{type:String,default:""},duration:{type:Number,default:1.5},type:{type:String},content:{type:String,default:""},styles:{type:Object,default:function(){return{right:"50%"}}},closable:{type:Boolean,default:!1},className:{type:String},name:{type:String,required:!0},onClose:{type:Function},transitionName:{type:String}},data:function(){return{withDesc:!1}},computed:{baseClass:function(){return this.prefixCls+"-notice"},classes:function(){var t;return[this.baseClass,(t={},a()(t,""+this.className,!!this.className),a()(t,this.baseClass+"-closable",this.closable),a()(t,this.baseClass+"-with-desc",this.withDesc),t)]},contentClasses:function(){return this.baseClass+"-content"}},methods:{clearCloseTimer:function(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)},close:function(){this.clearCloseTimer(),this.onClose(),this.$parent.close(this.name)}},mounted:function(){var t=this;this.clearCloseTimer(),0!==this.duration&&(this.closeTimer=setTimeout(function(){t.close()},1e3*this.duration)),"ivu-notice"===this.prefixCls&&(this.withDesc=""!==this.$refs.content.querySelectorAll("."+this.prefixCls+"-desc")[0].innerHTML)},beforeDestroy:function(){this.clearCloseTimer()}}},"W+18":function(t,e){},X4F1:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout-content"},[n("Row",[n("div",{staticClass:"fb"},[n("router-link",{attrs:{to:"/news/edit/0"}},[n("Button",{attrs:{type:"info"}},[t._v("发布文章")])],1)],1)]),t._v(" "),n("Row",[[n("Table",{attrs:{columns:t.columns,data:t.data}})]],2)],1)},a=[],i={render:s,staticRenderFns:a};e.a=i},YaEn:function(t,e,n){"use strict";var s=n("MVSX"),a=n("zO6J"),i=n("lO7g"),o=n("ERXc"),r=n("ZmoA");s.default.use(a.a),e.a=new a.a({routes:[{path:"/",name:"Home",component:i.a},{path:"/news/list/:id",name:"NewsList",component:o.a},{path:"/news/edit/:id",name:"NewsEdit",component:r.a}]})},ZmoA:function(t,e,n){"use strict";var s=n("q6ql"),a=n("FGUt"),i=n("46Yf"),o=i(s.a,a.a,!1,null,null,null);e.a=o.exports},b5ek:function(t,e){},"cn+x":function(t,e,n){"use strict";function s(){return"ivuNotification_"+l+"_"+u++}var a=n("aA9S"),i=n.n(a),o=n("a3Yh"),r=n.n(o),c=n("r2hd"),u=0,l=Date.now();e.a={components:{Notice:c.a},props:{prefixCls:{type:String,default:"ivu-notification"},styles:{type:Object,default:function(){return{top:"65px",left:"50%"}}},content:{type:String},className:{type:String}},data:function(){return{notices:[]}},computed:{classes:function(){return[""+this.prefixCls,r()({},""+this.className,!!this.className)]}},methods:{add:function(t){var e=t.name||s(),n=i()({styles:{right:"50%"},content:"",duration:1.5,closable:!1,name:e},t);this.notices.push(n)},close:function(t){for(var e=this.notices,n=0;n<e.length;n++)if(e[n].name===t){this.notices.splice(n,1);break}},closeAll:function(){this.notices=[]}}}},lO7g:function(t,e,n){"use strict";var s=n("xM0o"),a=n("MCn/"),i=n("46Yf"),o=i(s.a,a.a,!1,null,null,null);e.a=o.exports},pALC:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.classes,style:t.styles},t._l(t.notices,function(e){return n("Notice",{key:e.name,attrs:{"prefix-cls":t.prefixCls,styles:e.styles,type:e.type,content:e.content,duration:e.duration,closable:e.closable,name:e.name,"transition-name":e.transitionName,"on-close":e.onClose}})}))},a=[],i={render:s,staticRenderFns:a};e.a=i},q6ql:function(t,e,n){"use strict";var s=n("tra3"),a=n.n(s),i=n("PRnq"),o=n.n(i),r=n("vUJM");e.a={name:"NewsEdit",components:{},data:function(){return{news:{},editor:null}},computed:{headers:function(){return{"X-CSRF-TOKEN":a()('meta[name="csrf-token"]').attr("content")}}},beforeMount:function(){var t=this.$route.path,e=t.split("/"),n=parseInt(e[2]);n>0&&(this.news=this.getNew(n))},mounted:function(){this.editor=new o.a("#content"),this.editor.create(),this.editor.txt.html(this.news.content)},methods:{getNew:function(t){var e=this;a.a.ajax({type:"post",dataType:"json",data:{action:"get_new",id:t},url:"http://"+document.location.host+"/manage/news"}).done(function(t){0===t.err?e.news=t.info:r.a.warning(t.msg)}).fail(function(t){r.a.error("获取信息失败：服务器错误")})},uploadSuccess:function(t,e,n){1e3===t.status?this.data.pic=t.path:r.a.error(t.msg)},save:function(){if(this.data.content=this.editor.txt.html(),!this.data.title)return void r.a.error("请填写标题！");this.data.action="save",this.data._token=a()('meta[name="csrf-token"]').attr("content"),a.a.ajax({type:"post",dataType:"json",data:this.data,url:"http://"+document.location.host+"/manage/news"}).done(function(t){0===t.err?r.a.success(t.msg):r.a.warning(t.msg)}).fail(function(t){r.a.error("获取信息失败：服务器错误")})},reset:function(){}}}},r2hd:function(t,e,n){"use strict";var s=n("UzNf"),a=n("HHc9"),i=n("46Yf"),o=i(s.a,a.a,!1,null,null,null);e.a=o.exports},xM0o:function(t,e,n){"use strict";e.a={name:"home",components:{},data:function(){return{}},methods:{}}}},["NHnr"]);
//# sourceMappingURL=app.js.map